{"version":3,"file":"static/webpack/static/development/pages/index.js.2ac2ff4a9f88d6fbe52c.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import * as React from \"react\"\nimport Heading from \"@kiwicom/orbit-components/lib/Heading\"\nimport styled from \"styled-components\"\nimport { format } from \"date-fns\"\nimport Router from \"next/router\"\n\nimport ContentContainer from \"../components/ContentContainer\"\nimport Interests from \"../components/Interests\"\nimport PlacesToVisit from \"../components/PlacesToVisit\"\nimport TopPart, { defaultValues } from \"../components/TopPart\"\n\nconst NomadForm = styled.div`\n  max-width: 816px;\n`\n\nconst StyledOrigin = styled.div`\n  max-width: 756px;\n`\n\nconst placesToUrl = places =>\n  places\n    .map(([place, days]) => [place && place.code, days])\n    .toString()\n    .replace(/,/g, \"-\")\n\nconst changePlacesState = newPlaces => {\n  const newUrl = {\n    pathname: Router.pathname,\n    query: {\n      ...Router.query,\n      stopovers: placesToUrl(newPlaces)\n    }\n  }\n  // eslint-disable-next-line fp/no-mutating-methods\n  Router.push(newUrl, newUrl, { shallow: true })\n}\n\nconst getPlaceFromString = val =>\n  typeof val === \"string\"\n    ? { name: `[${val}]`, code: val, id: val }\n    : val\n\n// Mexico,2,5,Poland,1,3 => [[\"Mexico\", defaultDays]]\nconst UrlToPlaces = url => {\n  if (!url) return undefined\n  const items = url.split(\"-\")\n  const result = []\n  // eslint-disable-next-line\n  for (let i = 0; i < items.length; i += 3)\n    // eslint-disable-next-line fp/no-mutating-methods\n    result.push([\n      getPlaceFromString(items[i]),\n      [items[i + 1], items[i + 2]]\n    ])\n  return result\n}\n\nconst FlyForm = ({ query, places }) => (\n  <ContentContainer>\n    <Heading type=\"title1\" spaceAfter=\"largest\">\n      What are you interested in?\n    </Heading>\n    <Interests\n      defaultValue={query.interest || defaultValues.interest}\n    />\n    <NomadForm>\n      <StyledOrigin>\n        <Heading type=\"title1\" spaceAfter=\"medium\">\n          What destinations do you want to visit?\n        </Heading>\n        <TopPart\n          {...query}\n          adults={query.adults || defaultValues.adults}\n          flyFrom={query.flyFrom || defaultValues.flyFrom}\n          flyTo={query.flyTo}\n        />\n      </StyledOrigin>\n      <PlacesToVisit\n        onChange={changePlacesState}\n        defaultValue={places}\n        onSearchClick={selectedPlaces => {\n          const values = { ...defaultValues, ...Router.query }\n          const newUrl = {\n            pathname: `${BASE_URL}/result`,\n            query: {\n              ...values,\n              dateFrom: format(values.dateFrom, \"YYYY-MM-DD\"),\n              dateTo: format(values.dateTo, \"YYYY-MM-DD\"),\n              flyFrom:\n                typeof values.flyFrom === \"string\"\n                  ? values.flyFrom\n                  : values.flyFrom.id,\n              stopovers: placesToUrl(selectedPlaces),\n              places: undefined\n            }\n          }\n          Router.push(newUrl) // eslint-disable-line\n        }}\n      />\n    </NomadForm>\n  </ContentContainer>\n)\n\nFlyForm.getInitialProps = async ({ req, query }) => {\n  const places = UrlToPlaces(query.stopovers) || defaultValues.places\n  return { query, places }\n}\n\nexport default FlyForm\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAEA;AAAA;AAAA;AACA;AADA;AAAA;AAFA;AACA;AAKA;AACA;AACA;AACA;AAEA;AAFA;AACA;AAHA;AAQA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAFA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AACA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAIA;AACA;AATA;AAFA;AAcA;AACA;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AApBA;AACA;AA6CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}